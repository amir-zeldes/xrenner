

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using xrenner &mdash; xrenner 2.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="xrenner 2.1.0 documentation" href="index.html"/>
        <link rel="next" title="Buliding New Language Models" href="models.html"/>
        <link rel="prev" title="Welcome to xrenner’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> xrenner
          

          
          </a>

          
            
            
              <div class="version">
                2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">     Using xrenner</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#batch-input">Batch input</a></li>
<li class="toctree-l2"><a class="reference internal" href="#importing-as-a-module">Importing as a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-format">Input format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-formats">Output formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sgml-default">sgml (default)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conll">conll</a></li>
<li class="toctree-l3"><a class="reference internal" href="#html">html</a></li>
<li class="toctree-l3"><a class="reference internal" href="#onto">onto</a></li>
<li class="toctree-l3"><a class="reference internal" href="#paula">paula</a></li>
<li class="toctree-l3"><a class="reference internal" href="#webannotsv">webannotsv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unittest">unittest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#none">none</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="models.html">     Building your own language models</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth.html">     In depth guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">     Developers&#8217; module documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">xrenner</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Using xrenner</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/using.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-xrenner">
<h1>Using xrenner<a class="headerlink" href="#using-xrenner" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>To use the default model on English language data, you can run the main script xrenner.py on a text file in the 10 column conll10 or conllu format like this:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">python</span> <span class="pre">xrenner.py</span> <span class="pre">infile.conll10</span></code></p>
<p>If you have other language models, you can use them like this, for example for German:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">python</span> <span class="pre">xrenner.py</span> <span class="pre">-m</span> <span class="pre">deu</span> <span class="pre">infile.conll10</span></code></p>
<p>The default output format is a simple inline SGML format, but other output formats are available, using the -o option:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">python</span> <span class="pre">xrenner.py</span> <span class="pre">-o</span> <span class="pre">conll</span> <span class="pre">infile.conll10</span></code></p>
<p>If your model includes alternative setting profiles in an override.ini file (or compressed model component), you can invoke these using the -x option, e.g. to change the default model from the OntoNotes scheme to the GUM scheme:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">python</span> <span class="pre">xrenner.py</span> <span class="pre">-x</span> <span class="pre">GUM</span> <span class="pre">infile.conll10</span></code></p>
<p>You can also turn on verbose mode using -v which will report performance speed, and use -t without an input file to run unit tests and confirm the system is working as expected. Other options include -r to turn off classifiers (faster, but less accurate for models using classifiers), and -d &lt;FILENAME&gt; to dump all coreference candidate pairs to a file as training data for a classifier (see <a class="reference internal" href="buildclf.html"><span class="doc">Building classifiers</span></a>)</p>
</div>
<div class="section" id="batch-input">
<h2>Batch input<a class="headerlink" href="#batch-input" title="Permalink to this headline">¶</a></h2>
<p>You can use <a class="reference external" href="https://docs.python.org/2/library/glob.html">glob</a> syntax  to process multiple files in batch mode. This will be substantially faster than invoking the xrenner multiple times, since the lexical data will only be loaded once. For example, you can read all .conll10 files in a directory like this:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">python</span> <span class="pre">xrenner.py</span> <span class="pre">*.conll10</span></code></p>
<p>In batch mode, output file names are automatically generated using the input file name, minus extensions like &#8216;conll10&#8217; or &#8216;conllu&#8217;, and suffixed with the output format extension. For PAULA, document directories with names corresponding to the input documents are generated automatically.</p>
<p>If you have multiple cores available, batch mode works much faster by using multiple processes with the option -p, for example:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">python</span> <span class="pre">xrenner.py</span> <span class="pre">-x</span> <span class="pre">GUM</span> <span class="pre">-p</span> <span class="pre">4</span> <span class="pre">*.conll10</span></code></p>
<p>Note that if your model uses neural models with large contextualized embeddings (e.g. Bert), multiple processes may not fit in memory when RAM is limited. For &#8220;could not allocate memory errors&#8221;, consider trying -p 1.</p>
</div>
<div class="section" id="importing-as-a-module">
<h2>Importing as a module<a class="headerlink" href="#importing-as-a-module" title="Permalink to this headline">¶</a></h2>
<p>You can import xrenner as a module. It may be convenient to just install xrenner via pip in this scenario:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">xrenner</span>
</pre></div>
</div>
<p>Then you can import the Xrenner object and feed it a string containing a 10 column conll format parse (see below on formats):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xrenner</span> <span class="kn">import</span> <span class="n">Xrenner</span>

<span class="n">xrenner</span> <span class="o">=</span> <span class="n">Xrenner</span><span class="p">()</span>
<span class="c1"># Get a parse in Universal Dependencies</span>
<span class="n">my_conllu_result</span> <span class="o">=</span> <span class="n">some_parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;John visited Spain. His visit went well.&quot;</span><span class="p">)</span>

<span class="n">sgml_result</span> <span class="o">=</span> <span class="n">xrenner</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">my_conllu_result</span><span class="p">,</span><span class="s2">&quot;sgml&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sgml_result</span><span class="p">)</span>
</pre></div>
</div>
<p>Keep in mind that the parser output must match whatever annotation scheme the xrenner model is expecting (tags, label names, head-dependent conventions, etc.)</p>
</div>
<div class="section" id="input-format">
<h2>Input format<a class="headerlink" href="#input-format" title="Permalink to this headline">¶</a></h2>
<p>xrenner uses the 10 column tab delimited conllu format, with <strong>one line per token</strong> and <strong>a blank line between sentences</strong>. All of the following columns should be included (use an <strong>underscore</strong> for missing values):</p>
<ol class="arabic simple">
<li><strong>ID</strong> - token ID within sentence</li>
<li><strong>text</strong> - token text</li>
<li><strong>lemma</strong> - dictionary entry for this token (optional)</li>
<li><strong>upos</strong> - universal part of speech</li>
<li><strong>xpos</strong> - native part of speech (for English: PTB)</li>
<li><strong>morph</strong> - morphological information for this token (optional)</li>
<li><strong>head</strong> - ID of head token</li>
<li><strong>func</strong> – dependency function</li>
<li>&#8211; 10. – reserved for alternate trees with multiple parentage (DAGs) and misc. annotations</li>
</ol>
<p><strong>Example</strong>:</p>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span></span>1       Wikinews        _       PROPN   NNP     _       2       nsubj   _       _
2       interviews      _       VERB    VBZ     _       0       root    _       _
3       President       _       NOUN    NN      _       2       obj     _       _
4       of      _       ADP     IN      _       7       case    _       _
5       the     _       DET     DT      _       7       det     _       _
6       International   _       PROPN   NNP     _       7       amod    _       _
7       Brotherhood     _       PROPN   NNP     _       3       nmod    _       _
8       of      _       ADP     IN      _       9       case    _       _
9       Magicians       _       PROPN   NNPS    _       7       nmod    _       _

1       Wednesday       _       PROPN   NNP     _       0       root    _       _
2       ,       _       PUNCT   ,       _       4       punct   _       _
3       October _       PROPN   NNP     _       4       compound        _       _
4       9       _       NUM     CD      _       1       appos   _       _
5       ,       _       PUNCT   ,       _       6       punct   _       _
6       2013    _       NUM     CD      _       4       nmod:tmod       _       _
</pre></div>
</div>
</div></blockquote>
<p>It is also possible to include comments on lines beginning with the pound sign. These are generally ignored, with the exception of optional sentence type (s_type) and speaker annotations, as in the example below, which can be used as part of <a class="reference internal" href="models.html#coref-rules-tab"><span class="std std-ref">coref_rules.tab</span></a> (e.g. specifying having the same or different speakers as a condition):</p>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span></span># speaker=&quot;Mario J. Lucero&quot;
# s_type=&quot;decl&quot;
1       Heaven  _       PROPN   NNP     _       6       nsubj   _       _
2       Sent    _       PROPN   NNP     _       1       flat    _       _
3       Gaming  _       PROPN   NNP     _       1       flat    _       _
4       is      _       AUX     VBZ     _       6       cop     _       _
5       basically       _       ADV     RB      _       6       advmod  _       _
6       me      _       PRON    PRP     _       0       root    _       _
7       and     _       CCONJ   CC      _       8       cc      _       _
8       Isabel  _       PROPN   NNP     _       6       conj    _       _
9       ,       _       PUNCT   ,       _       12      punct   _       _
10      I       _       PRON    PRP     _       12      nsubj   _       _
11      &#39;m      _       AUX     VBP     _       12      cop     _       _
12      Mario   _       PROPN   NNP     _       6       parataxis       _       _
13      J.      _       PROPN   NNP     _       12      flat    _       _
14      Lucero  _       PROPN   NNP     _       12      flat    _       _
15      .       _       PUNCT   .       _       6       punct   _       _

# speaker=&quot;Isabel Ruiz&quot;
# s_type=&quot;decl&quot;
1       And     _       CCONJ   CC      _       5       cc      _       _
2       ,       _       PUNCT   ,       _       1       punct   _       _
3       I       _       PRON    PRP     _       5       nsubj   _       _
4       &#39;m      _       AUX     VBP     _       5       cop     _       _
5       Isabel  _       PROPN   NNP     _       0       root    _       _
6       Ruiz    _       PROPN   NNP     _       5       flat    _       _
7       .       _       PUNCT   .       _       5       punct   _       _
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="output-formats">
<h2>Output formats<a class="headerlink" href="#output-formats" title="Permalink to this headline">¶</a></h2>
<p>Using the -o flag, the following output formats are supported:</p>
<div class="section" id="sgml-default">
<h3>sgml (default)<a class="headerlink" href="#sgml-default" title="Permalink to this headline">¶</a></h3>
<p>This is the default output format. Each line is either a token or an opening or closing entity tag.</p>
<p><strong>Example</strong>:</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;referent</span> <span class="na">id=</span><span class="s">&quot;referent_197&quot;</span> <span class="na">entity=</span><span class="s">&quot;person&quot;</span> <span class="na">group=</span><span class="s">&quot;34&quot;</span> <span class="na">antecedent=</span><span class="s">&quot;referent_142&quot;</span> <span class="na">type=</span><span class="s">&quot;coref&quot;</span><span class="nt">&gt;</span>
Mrs.
Hills
<span class="nt">&lt;/referent&gt;</span>
said
that
<span class="nt">&lt;referent</span> <span class="na">id=</span><span class="s">&quot;referent_198&quot;</span> <span class="na">entity=</span><span class="s">&quot;place&quot;</span> <span class="na">group=</span><span class="s">&quot;2&quot;</span> <span class="na">antecedent=</span><span class="s">&quot;referent_157&quot;</span> <span class="na">type=</span><span class="s">&quot;coref&quot;</span><span class="nt">&gt;</span>
the
U.S.
<span class="nt">&lt;/referent&gt;</span>
is
still
concerned
about
``
disturbing
developments
in
<span class="nt">&lt;referent</span> <span class="na">id=</span><span class="s">&quot;referent_201&quot;</span> <span class="na">entity=</span><span class="s">&quot;place&quot;</span> <span class="na">group=</span><span class="s">&quot;20&quot;</span> <span class="na">antecedent=</span><span class="s">&quot;referent_193&quot;</span> <span class="na">type=</span><span class="s">&quot;coref&quot;</span><span class="nt">&gt;</span>
Turkey
<span class="nt">&lt;/referent&gt;</span>
and
continuing
slow
progress
in
<span class="nt">&lt;referent</span> <span class="na">id=</span><span class="s">&quot;referent_203&quot;</span> <span class="na">entity=</span><span class="s">&quot;place&quot;</span> <span class="na">group=</span><span class="s">&quot;20&quot;</span> <span class="na">antecedent=</span><span class="s">&quot;referent_201&quot;</span> <span class="na">type=</span><span class="s">&quot;coref&quot;</span><span class="nt">&gt;</span>
Malaysia
<span class="nt">&lt;/referent&gt;</span>
.
&#39;&#39;
<span class="nt">&lt;referent</span> <span class="na">id=</span><span class="s">&quot;referent_204&quot;</span> <span class="na">entity=</span><span class="s">&quot;person&quot;</span> <span class="na">group=</span><span class="s">&quot;34&quot;</span> <span class="na">antecedent=</span><span class="s">&quot;referent_197&quot;</span> <span class="na">type=</span><span class="s">&quot;ana&quot;</span><span class="nt">&gt;</span>
She
<span class="nt">&lt;/referent&gt;</span>
did
n&#39;t
elaborate
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="conll">
<h3>conll<a class="headerlink" href="#conll" title="Permalink to this headline">¶</a></h3>
<p>Standard conll coreference format, one token per line and numbered opening/closing brackets in a separate column to express groups.
Note that this format only groups mentions but does not represent antecedents and chain types (anaphora, apposition etc.) directly.</p>
<p><strong>Example</strong>:</p>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span></span>1       Portrait        _
2       shot    _
3       of      _
4       Dennis  (4
5       Hopper  4)
6       ,       _
7       famous  _
8       for     _
9       his     (4)
10      role    _
11      in      _
12      the     _
13      1969    _
14      film    _
15      Easy    _
16      Rider   _
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="html">
<h3>html<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h3>
<p>Very similar to sgml, but designed to visualize coreferent groups in same colored divs, and some entity icons, all using Font Awesome (<a class="reference external" href="http://fontawesome.io/">http://fontawesome.io/</a>) and JavaScript (see <a class="reference internal" href="index.html"><span class="doc">main page</span></a> for an example). The css and scripts are available in the utils/vis/ directory.</p>
</div>
<div class="section" id="onto">
<h3>onto<a class="headerlink" href="#onto" title="Permalink to this headline">¶</a></h3>
<p>OntoNotes .coref XML format. Coreference types are represented, but only entity groups are used (no exact coref chains).</p>
<p><strong>Example</strong>:</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span>Portrait shot of
<span class="nt">&lt;COREF</span> <span class="na">ID=</span><span class="s">&quot;4&quot;</span> <span class="na">ENTITY=</span><span class="s">&quot;person&quot;</span> <span class="na">INFSTAT=</span><span class="s">&quot;new&quot;</span><span class="nt">&gt;</span>Dennis Hopper<span class="nt">&lt;/COREF&gt;</span> ,
famous for <span class="nt">&lt;COREF</span> <span class="na">ID=</span><span class="s">&quot;4&quot;</span> <span class="na">ENTITY=</span><span class="s">&quot;person&quot;</span> <span class="na">INFSTAT=</span><span class="s">&quot;giv&quot;</span> <span class="na">TYPE=</span><span class="s">&quot;ana&quot;</span><span class="nt">&gt;</span>his<span class="nt">&lt;/COREF&gt;</span>
role in the 1969 film Easy Rider
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="paula">
<h3>paula<a class="headerlink" href="#paula" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.sfb632.uni-potsdam.de/images/doc/PAULA_P1.1.2013.1.21a.pdf">PAULA XML</a> is a highly expressive, graph-like stand off XML format. Because PAULA documents are directory structures with multiple files, there is no need to specify an output file (&gt; outfile) when using PAULA output.</p>
<p>The output using PAULA preserves both the exact antecdent chain structure and coreference types, as well as the optional information status annotations designating first mention (<em>new</em>) and subsequent mentions (<em>giv</em> for &#8216;given&#8217;).</p>
</div>
<div class="section" id="webannotsv">
<h3>webannotsv<a class="headerlink" href="#webannotsv" title="Permalink to this headline">¶</a></h3>
<p>Tab-delimited format used by the WebAnno and Inception annotation tools.</p>
<dl class="docutils">
<dt><strong>Example</strong>:</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span>#FORMAT=WebAnno TSV 3.2
#T_SP=webanno.custom.Referent|entity|infstat
#T_RL=webanno.custom.Coref|coreftype|BT_webanno.custom.Referent

#Text=Charles J. Fillmore
1-1     0-7     Charles person[1]       new[1]  coref   2-1[2_1]
1-2     8-10    J.      person[1]       new[1]  _       _
1-3     11-19   Fillmore        person[1]       new[1]  _       _

#Text=Charles J. Fillmore ( August 9 , 1929 – February 13 , 2014 ) was an American linguist and Professor of Linguistics at the University of California , Berkeley .
2-1     20-27   Charles person[2]       giv[2]  coref   2-16[9_2]
2-2     28-30   J.      person[2]       giv[2]  _       _
2-3     31-39   Fillmore        person[2]       giv[2]  _       _
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="unittest">
<h3>unittest<a class="headerlink" href="#unittest" title="Permalink to this headline">¶</a></h3>
<p>This is an internal format used only to generate test cases for xrenner unit tests.</p>
</div>
<div class="section" id="none">
<h3>none<a class="headerlink" href="#none" title="Permalink to this headline">¶</a></h3>
<p>This is a dummy format setting - run the analysis but produce no output. Useful when using the -d, &#8211;dump option for classifier training data.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="models.html" class="btn btn-neutral float-right" title="Buliding New Language Models" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to xrenner’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020, Amir Zeldes.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            //$(this).parent().children(".hidden").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>